:root {
  --gap:16px;
  --bg:#0a0a0a;
  --fg:#f5f5f5;
  --muted:#999;
  --card-bg:#1a1a1a;
  --accent:#3b82f6;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font:16px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  /* Keep visibility states intact */
  .card-overlay {
    transition-duration: 0.01ms !important;
  }
}

/* Header */
header{
  max-width:1400px;
  margin:0 auto;
  padding:32px 24px 24px;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.header-content{display:flex;justify-content:space-between;align-items:flex-start;gap:24px;flex-wrap:wrap}
.header-text h1{margin:0 0 8px;font-size:2rem;font-weight:700;letter-spacing:-.02em}
.header-text p{margin:0;color:var(--muted);font-size:1rem}

/* Loading state */
.loader{
  max-width:1400px;
  margin:60px auto;
  padding:0 24px;
  text-align:center;
  color:var(--muted);
}
.loader p{
  margin-top:16px;
}
.spinner{
  display:inline-block;
  width:40px;
  height:40px;
  border:3px solid rgba(255,255,255,.1);
  border-top-color:var(--accent);
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Photo count */
.photo-count{
  max-width:1400px;
  margin:16px auto 0;
  padding:0 24px;
  color:var(--muted);
  font-size:.9rem;
}

main{flex:1;}

/* Masonry Grid */
.grid{
  max-width:1400px;
  margin:24px auto 80px;
  padding:0 24px;
  column-count:4;
  column-gap:var(--gap);
}
@media(max-width:1200px){.grid{column-count:3}}
@media(max-width:768px){.grid{column-count:2}}
@media(max-width:480px){.grid{column-count:1}}

.card{
  position:relative;
  break-inside:avoid;
  margin-bottom:var(--gap);
  background:var(--card-bg);
  border-radius:16px;
  overflow:hidden;
  cursor:pointer;
  transition:transform .2s ease,box-shadow .2s ease;
  contain:layout style paint;
  content-visibility:auto;
}
.card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,.5)}
.card img{
  width:100%;
  height:auto;
  display:block;
  background:#0f0f0f;
  transition:filter .3s ease,transform .3s ease,opacity .3s ease;
}
.card img:not(.loaded){
  opacity:0;
}
.card img.loaded{
  opacity:1;
}
.card img.error{
  opacity:0.3;
  filter:grayscale(1);
}
.card:hover img{
  filter:blur(4px) brightness(.85);
  transform:scale(1.03);
}
.card:hover img.error{
  filter:blur(4px) brightness(.85) grayscale(1);
}
.card-overlay{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
  padding:24px;
  background:rgba(0,0,0,.55);
  color:var(--fg);
  text-align:center;
  opacity:0 !important;
  visibility:hidden !important;
  transform:translateY(8px);
  pointer-events:none;
  transition:opacity .25s ease,transform .25s ease,visibility 0s linear .25s;
}
.card-overlay p{
  margin:0;
  font-size:.9rem;
  letter-spacing:.01em;
}
.card:hover .card-overlay{
  opacity:1 !important;
  visibility:visible !important;
  transform:translateY(0);
  transition:opacity .25s ease,transform .25s ease;
}

/* Lightbox Dialog */
dialog{
  width:95vw;
  max-width:1400px;
  max-height:95vh;
  border:0;
  padding:0;
  border-radius:20px;
  background:#0f0f0f;
  color:#fff;
  box-shadow:0 20px 60px rgba(0,0,0,.8);
  margin:auto
}
dialog::backdrop{background:rgba(0,0,0,.85);backdrop-filter:blur(4px)}

.lb{
  position:relative;
  display:grid;
  gap:0;
  padding:0;
  max-height:95vh;
  overflow:hidden;
}
.lb-content{
  display:grid;
  grid-template-columns:1fr auto;
  gap:0;
  max-height:95vh;
}
@media(max-width:900px){.lb-content{grid-template-columns:1fr;grid-template-rows:auto 1fr}}

.lb-image-container{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000;
  overflow:hidden;
  max-height:95vh;
}
.lb img{
  max-width:100%;
  max-height:95vh;
  width:auto;
  height:auto;
  object-fit:contain;
  display:block;
}

.lb-sidebar{
  width:320px;
  background:#0f0f0f;
  border-left:1px solid rgba(255,255,255,.1);
  padding:24px;
  overflow-y:auto;
  max-height:95vh;
}
@media(max-width:900px){
  .lb-sidebar{
    width:100%;
    border-left:0;
    border-top:1px solid rgba(255,255,255,.1);
    max-height:40vh;
  }
}

.lb-title{font-size:1.1rem;font-weight:600;margin-bottom:20px;word-break:break-word}
.meta-section{margin-bottom:24px}
.meta-section h3{font-size:.85rem;text-transform:uppercase;letter-spacing:.05em;color:var(--muted);margin-bottom:12px;font-weight:600}
.meta-row{
  display:flex;
  align-items:baseline;
  padding:8px 0;
  border-bottom:1px solid rgba(255,255,255,.06);
  font-size:.9rem;
  gap:12px;
  justify-content:space-between;
}
.meta-row:last-child{border-bottom:0}
.meta-label{
  color:var(--muted);
  flex:0 0 auto;
  min-width:80px;
}
.meta-label::after{
  content:':';
  margin-right:0;
}
.meta-value{
  text-align:right;
  word-break:break-word;
  color:var(--fg);
  flex:0 1 auto;
  margin-left:12px;
}

/* Dialog controls */
.dlg-controls{
  position:absolute;
  top:16px;
  right:16px;
  z-index:10;
  display:flex;
  gap:8px;
  margin:auto;
}
.dlg-btn{
  border:0;
  background:rgba(0,0,0,.7);
  color:#fff;
  border-radius:12px;
  padding:10px 14px;
  cursor:pointer;
  font-size:1.2rem;
  transition:background .2s ease;
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
}
.dlg-btn:hover{background:rgba(0,0,0,.9)}

.nav-btn{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  border:0;
  background:rgba(0,0,0,.7);
  color:#fff;
  border-radius:12px;
  padding:16px 12px;
  cursor:pointer;
  font-size:1.5rem;
  transition:all .2s ease;
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
  z-index:10;
}
.nav-btn:hover{background:rgba(0,0,0,.9);transform:translateY(-50%) scale(1.1)}
.nav-btn:disabled{opacity:.3;cursor:not-allowed}
.nav-prev{left:16px}
.nav-next{right:16px}
@media(max-width:900px){
  .nav-prev{left:340px}
}
@media(max-width:600px){
  .nav-btn{padding:12px 10px;font-size:1.2rem}
  .nav-prev{left:8px}
  .nav-next{right:8px}
}

footer{
  color:var(--muted);
  text-align:center;
  margin:40px 0 60px;
  font-size:.9rem;
  margin-top:auto;
  padding:0 24px;
}
.empty{
  max-width:1400px;
  margin:60px auto;
  color:#bbb;
  padding:0 24px;
  text-align:center;
  font-size:1.1rem;
  display:none;
}
.empty.visible{
  display:block;
}
.sr-only{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border-width:0;
}
